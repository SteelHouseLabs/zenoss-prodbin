#!/bin/sh

# zenctl        This init.d script starts and stops Zenoss
#               
# description: Zenoss is a monitoring program written by Zenoss, Inc.

# environment variables
export ZENHOME="**ZENHOME**"
export RUNUSER="**OS_USERNAME**"

# signature of zenoss having been installed and configured
export FIRSTBOOT=${ZENHOME}/.installed


#
# main script starts here
#

# run the firstboot if this is the first time zenoss was started
if [ ! -f ${FIRSTBOOT} ]; then
    echo "Zenoss not initialized.  Performing first-boot initialization..."

    sudo -u ${RUNUSER} ${ZENHOME}/bin/zenoss_init
    touch ${FIRSTBOOT}

    echo "Zenoss initialization complete."
fi

# delegate to the main zenoss script for control functions
sudo -u ${RUNUSER} ${ZENHOME}/bin/zenoss $@
