<!--
###########################################################################
#
# This program is part of Zenoss Core, an open source monitoring platform.
# Copyright (C) 2009, Zenoss Inc.
#
# This program is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License version 2 as published by
# the Free Software Foundation.
#
# For complete information please visit: http://www.zenoss.com/oss/
#
###########################################################################
-->

<tal:block metal:use-macro="context/page_macros/base-new">

<tal:block metal:fill-slot="title">Network Map</tal:block>

<tal:block metal:fill-slot="head-local">
    <script tal:define="classlist python:[dict(label=x,data=x) for x in 
                        here.dmd.Devices.deviceMoveTargets()];
                        initobj python:here.dmd.ZenUsers.getUserSettings(
                                       )['netMapStartObject']"
        tal:content="string:
       _deviceClasses = ${classlist};
       _initialObjId = '${initobj}';
    "></script>
    <script language="javascript" type="text/javascript">
        function getDevClassList() {
            return _deviceClasses;
        }
        function getInitialObjId() {
            return _initialObjId;
        }
        function goToDeviceSearch(objid) {
            url = '/zport/dmd/goToStatusPage?objid=' + escape(objid);
            currentWindow().location.href = url;
        }
    </script>



    <script type="text/javascript" src="/++resource++zenui/js/swfobject/2.2/swfobject.js"></script>
    <script type="text/javascript">
    swfobject.registerObject("zennetmap", "9.0.0");
    </script>
    <style>
      #center { height: 100%; overflow: hidden;}
      #zennetmap_container { height: 100%; overflow: hidden;}

    </style>

</tal:block>


<tal:block metal:fill-slot="center_panel_content">
<div id="zennetmap_container" style="position: relative; overflow: hidden;">

      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
              id="zennetmap" width="100%" height="100%"
              codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" style="overflow: hidden;">
          <param name="movie" value="/zport/dmd/flex/ZenNetMap.swf" />
          <param name="quality" value="high" />
          <param name="bgcolor" value="#869ca7" />
          <param name="allowScriptAccess" value="sameDomain" />
          <embed src="/zport/dmd/flex/ZenNetMap.swf" quality="high" bgcolor="#869ca7"
              width="100%" height="100%" name="zennetmap" align="middle"
               loop="false" quality="high" allowScriptAccess="sameDomain"
              type="application/x-shockwave-flash"
              pluginspage="http://www.macromedia.com/go/getflashplayer">
          </embed>
      </object>

</div>
</tal:block>

<tal:block metal:fill-slot="script_layout">
<script>
</script>
</tal:block>
</tal:block> <!-- metal:use-macro="context/page_macros/masterdetailsplit2" -->
