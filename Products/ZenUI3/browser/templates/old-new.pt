<!--
###########################################################################
#
# This program is part of Zenoss Core, an open source monitoring platform.
# Copyright (C) 2009, Zenoss Inc.
#
# This program is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License version 2 as published by
# the Free Software Foundation.
#
# For complete information please visit: http://www.zenoss.com/oss/
#
###########################################################################
-->

<tal:block metal:define-macro="old-new-no-tabs">
<tal:block metal:use-macro="context/page_macros/base-new">

<tal:block metal:fill-slot="head-local">
    <tal:block metal:use-macro="here/templates/macros/head1"/>
    <link rel="stylesheet" href="/++resource++zenui/css/backcompat.css"/>
</tal:block>

<tal:block metal:fill-slot="center_panel_content">
    <tal:block metal:use-macro="here/dialogmacros/macros/proxyForm"/>
    <tal:block metal:use-macro="here/dialogmacros/macros/dialog_with_buttons"/>
    <div id="oldContentPane">
        <tal:block metal:define-slot="center_content">
            <div id="contentPaneContainer">
                <tal:block metal:define-slot="contentPane"/>
            </div>
        </tal:block>
    </div>
</tal:block>

<tal:block metal:fill-slot="script_layout">
<script>
Ext.onReady(function(){
    var items = [{
        region: 'center',
        autoScroll: true,
        bodyCssClass: 'z-bc-content-pane',
        contentEl: 'contentPaneContainer',
        split: true
    }];
    if (Zenoss.env.pageHasTabs) {
        items.push({
            region: 'west',
            width: 200,
            bodyCssClass: 'z-bc-tab-pane',
            contentEl: 'newTabsPane',
            split: true
        });
    }
    Ext.getCmp('center_panel').add({
        layout: 'border',
        defaults: {
            border: false
        },
        bodyCssClass: 'z-bc', // Zenoss back compat
        items:items
    });
});
</script>
</tal:block>

</tal:block> <!-- metal:use-macro="context/page_macros/base-new" -->
</tal:block>


<tal:block metal:define-macro="old-new">
<tal:block metal:use-macro="context/page_macros/old-new-no-tabs">

<tal:block metal:fill-slot="center_content">
<script>Zenoss.env.pageHasTabs = true;</script>
<div class="z-bc">
    <div metal:use-macro="here/templates/macros/newTabsPane"/>
    <div id="contentPaneContainer">
        <tal:block metal:define-slot="contentPane"/>
    </div>
</div>
</tal:block>

</tal:block> <!-- metal:use-macro="context/page_macros/old-new-no-tabs" -->
</tal:block>
