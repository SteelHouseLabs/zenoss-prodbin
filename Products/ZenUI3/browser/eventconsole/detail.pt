<html>
    <head>
        <link rel="stylesheet" type="text/css" 
            href="/++resource++extjs/resources/css/ext-all.css" />
        <link rel="stylesheet" type="text/css" 
            href="/++resource++zenui/css/xtheme-zenoss.css" />
        <link rel="stylesheet" type="text/css" 
            href="/++resource++zenui/css/zenoss.css" />
        <link rel="stylesheet"
            href="/++resource++zenui/js/livegrid/resources/css/ext-ux-livegrid.css"/>
        <tal:block tal:content="structure provider:js-security"/>
        <tal:block tal:content="structure provider:all-js"/>
    </head>
    <body class="zenui3">
<!-- NOTE: Template for rendering the detail pane. This is Ext's XTemplate language. The template gets
     rendered in Zenoss.DetailedPanel in zenoss.js

     ANOTHER NOTE: This functionality is duplicated in console-new.pt. Make sure you make any changes there in
     addition to here
  -->

<textarea class="dontexpand" style="display:none" id="detail_table_template">
<table>
    <tr><td class="dt">Device:</td> 
        <td>
            <tpl if="device">
                {device_link}
            </tpl>
        </td>
    </tr>
    <tr><td class="dt">Component:</td> 
        <td>
            <tpl if="component">
                {component_link}
            </tpl>
        </td>
    </tr>
    <tr><td class="dt">Event Class:</td> 
        <td>
            <tpl if="eventClass">
                {eventClass_link}
            </tpl>
        </td>
    </tr>

    <tr><td class="dt">Status:</td> <td>{eventState}</td></tr>
    <tr><td class="dt">Start Time:</td> <td>{firstTime}</td></tr>
    <tr><td class="dt">Stop Time:</td> <td>{lastTime}</td></tr>
    <tr><td class="dt">Count:</td> <td>{count}</td></tr>
    <tr><td class="dt">Message:</td> <td><pre>{message}</pre></td></tr>
    <tr><td class="dt">Systems:</td> <td>{Systems}</td></tr>    
    <tr><td class="dt">Groups:</td> <td>{DeviceGroups}</td></tr>
    <tr><td class="dt">Location:</td> <td>{Location}</td></tr>
    <tr><td class="dt">Device Class:</td> <td>{DeviceClass}</td></tr>
    <tr><td class="dt">Production State:</td> <td>{prodState}</td></tr>
    <tr><td class="dt">Device Priority:</td> <td>{DevicePriority}</td></tr>

</table>
</textarea>
<textarea class="dontexpand" style="display:none" id="log_table_template">
    <table>
    <tpl for="log">
    <tr><td class="time">{1} {0} said: </td>
        <td class="message">{2}</td></tr>
    </tpl>
    </table>
</textarea>
<textarea class="dontexpand" style="display:none" id="fullprop_table_template">
<table class="proptable">
    <tpl for="properties">
    <tr class='{[xindex % 2 === 0 ? "even" : "odd"]}'>
        <td class="proptable_key">{key}</td>
        <td class="proptable_value">{value}</td></tr>
    </tpl>
</table>
</textarea>

<!--The following is using a python statement to avoid permission issues for non-global roles -->
<script tal:content="python: 'Ext.onReady(function() { Zenoss.env.EVENTSGRID_STATEID = \'' + here.id + '_evconsole\';  });'" >
</script>

<script tal:content="python: 'var EVENT_ID = ' + '\'' + request.form['evid'].replace('\'', '') + '\';'">
</script> 
    
<style>
#evdetail-tools { display:none; } 
</style>
<script>
Ext.onReady(function(){
    var vp = new Ext.Viewport({
        layout: 'fit',
        renderTo: Ext.getBody().dom,
        items: [{
            xtype: 'detailpanel',
            id: 'dpanelcontainer'
        }]
    });
    vp.doLayout();
    Ext.getCmp('dpanelcontainer').load(EVENT_ID);
});
</script>
    </body>
</html>
