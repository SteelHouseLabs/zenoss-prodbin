<span tal:replace="structure here/standard_html_header"/>
<span metal:use-macro="here/top/macros/header" />
<br>
<table border="0" cellpadding="3" width="100%" 
    align="center" bgcolor="#ffffff" cellspacing="1"
    metal:define-macro="status">
    <tr>
      <th class="tabletitle" align="left" colspan="6">
        Status
      </th>
    </tr>
    <tr>
      <td class="tableheader" align="left" colspan="1">
        Events
      </td>
      <td class="tablevalues" colspan="1" align="left">
        <table border="0" cellpadding="0" width="100%" 
            align="center" bgcolor="#ffffff" cellspacing="1">
          <tr>
          <td class="statusvalues" align="center" bgcolor="_" width="16%"
            tal:on-error="structure string:
                <span style='color: white;'>Events unavailable</span>"
            tal:repeat="evt here/deviceGroupEventSummary"
            tal:attributes="bgcolor python:evt[1]"
            tal:content="python:evt[0]">0</td>
          </tr>
        </table>
      </td>
      <th class="tableheader" align="left" colspan="1">
          Sub Count 
      </th>
      <td class="tablevalues" colspan="1"
          tal:content="here/countChildren">
          100
      </td>
      <th class="tableheader" align="left" colspan="1">
          Device Count
      </th>
      <td class="tablevalues" colspan="1"
          tal:content="here/countDevices">
          100
      </td>
    </tr>
</table>
<br tal:condition="here/countChildren">
<table border=0 cellpadding=3 cellspacing=1
    tal:define="objects here/children;
        tableName string:children;
        batch python:here.ZenTableManager.getBatch(tableName,objects);"
    tal:condition=objects>
    <tr>
      <th class=tabletitle align=left colspan=4
        tal:content="string:Sub-${here/dmdRootName}">
        SubLocations
      </th>
    </tr>
    <tr>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'primarySortKey','Name')">
            Name 
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'countChildren','Subs')">
            Subs
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'countDevices','Devices')">
            Devices
        </th>
    </tr>
    <tr tal:repeat="group batch">
        <td class="tablevalues" align="left" width="50%">
            <a href="_" target="rightFrame"
            tal:attributes="href group/getPrimaryUrlPath"
            tal:content="group/id">Name</a>
        </td>
        <td class=tablevalues align=center tal:content="group/countChildren"/>
        <td class=tablevalues align=center tal:content="group/countDevices"/>
    </tr>
    <tr>
        <td colspan=4 class="tableheader" align='center'>
            <form metal:use-macro="here/zenTableNavigation/macros/navtool"></form>
        </td>
    </tr>
</table>
<br tal:condition="here/devices/countObjects">
<table metal:use-macro="here/deviceListMacro/macros/devList"></table>
<br />
<span tal:condition="here/isManager" metal:define-macro="editor">
<form method="post">
<input type="hidden" name="zenScreenName" 
    tal:attributes="value template/id"/>
<table border="0" cellpadding="3" cellspacing="1">
<tr class="tabletitlel">
    <th tal:content="string:Add ${here/meta_type}">Add Device</th>
</tr>
<tr>
    <td class="tablevalues">
        <input class="tablevalues" type="text" name="newPath" size="35"/>
        <input class="tablevalues" type="submit" 
            name="manage_addOrganizer:method" value=" Add " />
    </td>
</tr>
</table>
</form>
<form method="post">
<input type="hidden" name="zenScreenName" 
    tal:attributes="value template/id"/>
<table border="0" cellpadding="3" cellspacing="1">
<tr class="tabletitlel">
    <th tal:content="string:Delete ${here/meta_type}">Add Device</th>
</tr>
<tr>
    <td class="tablevalues">
        <select name="orgname">
            <option value=""></option>
            <option tal:repeat="
                dcname here/childIds"
                tal:content="dcname" tal:attributes="value dcname">
                    zCricketDeviceType
            </option>
        </select>
        <input class="tablevalues" type="submit" 
            name="manage_deleteOrganizer:method" value=" Delete " />
    </td>
</tr>
</table>
</form>
</span>
<span tal:replace="structure here/standard_html_footer"/>
