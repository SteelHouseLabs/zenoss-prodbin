<tal:block metal:use-macro="here/templates/macros/page2">
<tal:block metal:fill-slot="contentPane">

<form method="post"  metal:define-macro="objectperf"
    tal:attributes="action string:${here/absolute_url_path}/${template/id}">
<table class="zentable" cellpadding=3 cellspacing=1
    tal:define="tableName string:perfdetail;
    drange python: here.ZenTableManager.setReqTableState(tableName,'drange',129600);"
    >
    <input type='hidden' name='tableName' tal:attributes="value tableName" />
    <tr>
        <th class=tabletitle align=left>
            Range
        <select class="tableheader" name="drange:int" onchange="form.submit()">
            <option tal:repeat="r here/performanceDateRanges" 
                tal:content='python:r[0]' 
                tal:attributes="value python:r[1]; 
                                selected python:r[1]==drange"/>
        </select>
        </th>
    </tr>
    <span tal:condition="python:here.getId()=='rh'">
        <tr class=tabletitle>
        <td>Headend Uplink ifOctets</td>
        </tr>
        <tr class=tablevalues>
        <td>
        <img src="_"
            tal:attributes="src python:here.CVHeadendGraphs.generateUrl(here,drange)"
            >
        </td>
        </tr>
    </span>
    <span 
        tal:define="
            objects here/devices;
            sortOn python:(('getId', 'nocase', 'asc'),);
            sortedobjs python:sequence.sort(objects, sortOn)">
        <span tal:repeat="device sortedobjs">
        <tr>
        <th class=tabletitle align=left
                tal:content="device/viewName">name
        </th>
        </tr>
        <span tal:repeat="graph python:device.getDefaultGraphs(drange=drange)">
            <tr><td class=tableheader tal:content="graph/title">title</td></tr>
            <tr><td class=tablevalues>
                <img src="_" tal:attributes="src graph/url">
                </td>
            </tr>
        </span>
        </span>
    </span>
</table>
</form>
</tal:block>
</tal:block>
