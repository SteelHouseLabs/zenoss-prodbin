<tal:block metal:use-macro="here/templates/macros/page1">
<tal:block metal:fill-slot="title">Zenoss: Dashboard</tal:block>
<tal:block metal:fill-slot="infoBar">
   <div style="float:right; padding:0px; 
   font-weight:normal; font-style:normal; 
   font-size:8pt;line-height:24px;">
   <span id="dashTime" style="padding:10px;display:inline;">
    Last Updated: 00:00:00
   </span>

    <a tal:attributes=" href string:javascript:refreshData()">
    <img src="/zport/dmd/img/view-refresh.png" title="Refresh the Dashboard"
    alt="Refresh" style="border:medium none;"/>
            
   </a>
   </div>
</tal:block>

<tal:block metal:fill-slot="contentPane">
<div id="portletContainer"></div>
<script tal:define="settings python:here.ZenUsers.getUserSettings();
                    json settings/dashboardState | string:null"
    tal:content="string:
    var state = '${settings/dashboardState}';
    if(state) var dashboardState = evalJSON(state);
"></script>
<script>
// Initialization of dashboard portlets
var ContainerObject;
function initDashboardPortlets() {
    ContainerObject = new YAHOO.zenoss.portlet.PortletContainer(
        'portletContainer');
    if (dashboardState) {
        ContainerObject.restore(dashboardState);
    } else {
        ContainerObject.setLayout('2coleq', false);
        p1 = new YAHOO.zenoss.portlet.ProdStatePortlet({id:'prodstates'});
        p2 = new YAHOO.zenoss.portlet.DeviceIssuesPortlet({id:'devissues'});
        p3 = new YAHOO.zenoss.portlet.WatchListPortlet({id:'watchlist'});
        ContainerObject.leftCol().addPortlet(p1);
        ContainerObject.middleCol().addPortlet(p2);
        ContainerObject.rightCol().addPortlet(p3);
    }
}
YAHOO.zenoss.loader.require(['portletsource']);
YAHOO.zenoss.loader.insert({ 'onSuccess':initDashboardPortlets });
</script>
</tal:block>
</tal:block>
