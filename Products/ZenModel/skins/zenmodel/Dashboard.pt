<tal:block metal:use-macro="here/templates/macros/page1">

<tal:block metal:fill-slot="breadCrumbPane">
    /<a tal:attributes="
            href string:${here/absolute_url_path}/${template/id}">Dashboard
   </a>
</tal:block>

<tal:block metal:fill-slot="contentPane">
    <script type="text/javascript" src="/zport/js/MochiKit.js"></script>
    <script type="text/javascript" src="dashboard.js"></script>
    <table width=100%>
    <tr>
    <td width="50%" valign="top">
	<table class="zentable" cellpadding="3" cellspacing="1">
		<tr>
		  <th class="tabletitle" colspan="6">Devices with Status Issues</th>
		</tr>
		<tr>
			<th class="tableheader">Name</th>
			<th class="tableheader">Events</th>
			<th class="tableheader">Count</th>
		</tr>
        <tbody id="devstatus">
        </tbody>
	</table>
    </td>
    <td valign="top">
	<table class="zentable" cellpadding="3" cellspacing="1">
		<tr>
		  <th class="tabletitle" colspan="6">
            Devices with more than 10 Events
          </th>
		</tr>
		<tr>
			<th class="tableheader">Name</th>
			<th class="tableheader">Events</th>
			<th class="tableheader">Count</th>
		</tr>
        <tbody id="devevents">
        </tbody>
	</table>
    </td>
    </tr><tr>
    <td valign="top">
	<table class="zentable" cellpadding="3" cellspacing="1">
		<tr>
		  <th class="tabletitle" colspan="6">Systems with Status Issues</th>
		</tr>
		<tr>
			<th class="tableheader">System</th>
			<th class="tableheader">Events</th>
			<th class="tableheader">Count</th>
		</tr>
        <tbody id="sysstatus">
        </tbody>
	</table>
    </td>
    <td valign="top">
	<table class="zentable" cellpadding="3" cellspacing="1">
		<tr>
		  <th class="tabletitle" colspan="6">Missed Heartbeats</th>
		</tr>
		<tr>
			<th class="tableheader">Device</th>
			<th class="tableheader">Component</th>
			<th class="tableheader">Last</th>
		</tr>
        <tbody id="heartbeat">
        </tbody>
	</table>
    </td>
    </tr>
    <tr>
    <td colspan="2">
        <table class="zentable" cellpadding="3" cellspacing="1"
        tal:define="
        resultFields python:('device','summary','lastTime','count');"
        >
        <tr>
          <th class="tabletitle" 
            tal:attributes="colspan python:len(resultFields)">
            <a href="/zport/dmd/Events/viewEvents">Events</a>
          </th>
        </tr>
        <tr>
        <th class="tableheader" align="center"
            tal:repeat="headername resultFields" tal:content="headername">
        </th>
        </tr>
        <tbody id="events">
        </tbody>
        </table>
    </td>
    </tr>
    </table>
</tal:block>
</tal:block>
