<form method="post" tal:attributes="action here/absolute_url_path" 
    name="deviceListForm" metal:define-macro="devList">
<script type="text/javascript" 
        src="/zport/portal_skins/zenmodel/submitViaEnter.js"></script>
<table class="zentable" cellpadding="3" cellspacing="1"
    tal:define="objects here/devices/objectValuesAll;
        tableName string:devicelistmacro;
        batch python:here.ZenTableManager.getBatch(tableName,objects);"
    tal:condition="python: batch or
                    here.ZenTableManager.getTableState(tableName, 'filter')"
    >
    <tr>
      <th class="tabletitle" align="left" colspan="5">
       Devices 
      </th>
    </tr>
    <span metal:define-macro="devListBody" tal:omit-tag="">
    <input type='hidden' name='tableName' tal:attributes="value tableName" />
    <input type="hidden" name="zenScreenName" 
            tal:attributes="value template/id"/>
    <tr>
        <th 
            tal:replace="structure python:here.ZenTableManager.getTableHeader(
                            tableName,'primarySortKey','Name')">Name
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                            tableName,'getDeviceClassPath','Class')">Class
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'getProdState','State','cmp')">State
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'getPingStatusNumber','Ping','cmp')">Ping
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'getSnmpStatusNumber','Snmp','cmp')">Snmp
        </th>
	</tr>
	<tr tal:repeat="device batch">
		<td class="tablevalues" align="left">
            <input tal:condition="here/editableDeviceList" 
                type="checkbox" name="deviceNames:list" 
                tal:attributes="value device/getRelationshipManagerId"/>
            <a class="tablevalues" href="_" 
                tal:attributes="href device/getDeviceUrl"
                tal:content="device/id">device
            </a>
        </td>
		<td class="tablevalues" align="left"
            tal:content="device/getDeviceClassPath">
            type
        </td>
		<td class="tablevalues" align="left"
            tal:content="device/getProdState">
            prodstate
        </td >
        <span metal:use-macro="here/deviceMacros/macros/pingStatus" />
        <span metal:use-macro="here/deviceMacros/macros/snmpStatus" />
    </tr>
    <tr>
        <td colspan=5 class="tableheader" align='center'>
            <span metal:use-macro="here/zenTableNavigation/macros/navbody" />
        </td>
    </tr>
    <tr tal:condition="here/editableDeviceList">
        <td class="tableheader" align="left" colspan="5">
            <input class="tableheader" type="submit" name="moveDevices:method"
                    value="Move To" />
            <select class="tableheader" name="moveTarget"
            tal:define="targets here/deviceMoveTargets">
                <option value=""></option>
                <option tal:repeat="target targets" 
                    tal:content="target">/Server/Linux</option>
            </select>
            |
            <input class="tableheader" type="submit" 
                name="removeDevices:method" value="Delete" />
            |
            <input class="tableheader" type="submit"
                    name="SelectButton" value="Select All" 
                    onClick="toggleSelect(this.form);return false"/>
        </td>
    </tr>
    </span>
</table>
</form>


<span metal:define-macro="devListReportBody" tal:omit-tag="">
<tr>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                        tableName,'primarySortKey','Name')">Name
    </th>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                        tableName,'getDeviceClassPath','Class')">Class
    </th>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'getProdState','State')">State
    </th>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'getPingStatusNumber','Ping')">Ping
    </th>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'getSnmpStatusNumber','Snmp')">SNMP
    </th>
</tr>
<tr tal:repeat="device batch">
    <td class="tablevalues" align="left">
        <a class="tablevalues" href="_" 
            tal:attributes="href device/getDeviceUrl"
            tal:content="device/id">device
        </a>
    </td>
    <td class="tablevalues" align="left"
        tal:content="device/getDeviceClassPath">
        /NetworkDevice/Router
    </td>
    <td class="tablevalues" align="left"
        tal:content="device/getProdState">
        Production
    </td >
    <span metal:use-macro="here/deviceMacros/macros/pingStatus" />
    <span metal:use-macro="here/deviceMacros/macros/snmpStatus" />
</tr>
<tr>
    <td colspan=7 class="tableheader" align='center'>
        <form metal:use-macro="here/zenTableNavigation/macros/navtool"></form>
    </td>
</tr>
</span>
