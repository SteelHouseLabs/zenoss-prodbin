<tal:block tal:define="
	objects here/getDevices;
	objects python: (hasattr(request, 'doExport') and list(objects)) or objects;
	exportHeaders python: (hasattr(request, 'doExport') 
							and here.reportHeaders()) or None;
	exportFields python:exportHeaders;
	">
<tal:block metal:use-macro="here/reportMacros/macros/exportableReport">
<tal:block metal:fill-slot="report">

<tal:block metal:use-macro="here/templates/macros/page2">
<tal:block metal:fill-slot="contentPane">

<form method="post" tal:attributes="action here/absolute_url_path">
<input type="hidden" name="zenScreenName" tal:attributes="value template/id"/>
<table class="zentable"  cellpadding="3" cellspacing="1"
    tal:define="tableName here/title; 
    			batch python: here.ZenTableManager.getBatch(
						tableName, objects, 
						sortedHeader=here.sortedHeader, 
						sortedSence=here.sortedSence)"
    tal:on-error="string: Device Report ${here/title} has errors">
    <input type="hidden" name="tableName" tal:attributes="value tableName"/>
    <tr>
        <th class="tabletitle" tal:content="here/title_or_id"
            tal:attributes="colspan python:len(here.columns)">
            Device Report
        </th>
    </tr>
    <tr>
        <tal:block tal:repeat="head here/reportHeaders"
            tal:content="structure python:here.ZenTableManager.getTableHeader(
                        tableName, head[0], head[1])"/>
    </tr>
    <tr tal:replace="structure python:here.reportBody(batch)"/>
    <tr class="tableheader">
        <td tal:attributes="colspan python:len(here.columns)"> 
            <span metal:use-macro="here/zenTableNavigation/macros/navbody"/>
        </td>
    </tr>
</table>
</form>
</tal:block>
</tal:block>

</tal:block>
</tal:block>
</tal:block>