<span tal:replace="structure here/standard_html_header"/>
<span metal:use-macro="here/top/macros/header" />
<br>
<table border="0" cellpadding="3" width="100%" 
    align="center" bgcolor="#ffffff" cellspacing="1"
    metal:define-macro="status">
    <tr>
      <th class="tabletitle" align="left" colspan="4">
        Status
      </th>
    </tr>
    <tr>
      <td class="tableheader" align="left" colspan="1">
        Ping
      </td>
      <span tal:define="status here/pingStatus">
      <td class="statusvalues" bgcolor="#00ff00" colspan="1"
      tal:attributes="bgcolor python: here.statusColor(status)">
      <span tal:replace="status">ping status</span>     
      </td>
      </span>
      <td class="tableheader" align="left" colspan="1">
        Events
      </td>
      <td class="tablevalues" colspan="1" align="left">
        <table border="0" cellpadding="0" width="100%" 
            align="center" bgcolor="#ffffff" cellspacing="1">
          <tr>
          <td class="statusvalues" align="center" bgcolor="_" width="16%"
            tal:on-error="structure string:
                <span style='color: white;'>Events unavailable</span>"
            tal:repeat="evt python:here.netcool.getSystemEventSummary(
                                                here.getDeviceGroupName())"
            tal:attributes="bgcolor python:evt[1]"
            tal:content="python:evt[0]">0</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <th class="tableheader" align="left" colspan="1">
        SNMP
      </th>
      <span tal:define="status here/snmpStatus">
      <td class="statusvalues" bgcolor="#00ff00" colspan="1"
          tal:attributes="bgcolor python: here.statusColor(status)"
          tal:content="status">snmp status
      </td>
      </span>
      <th class="tableheader" align="left" colspan="1">
          Device Count
      </th>
      <td class="tablevalues" colspan="1"
          tal:content="here/countDevices">
          100
      </td>
    </tr>
</table>
<br tal:condition="here/children/countObjects">
<table border=0 cellpadding=3 width=100% 
    align=center bgcolor=#ffffff cellspacing=1
    tal:define="objects here/children;
        tableName string:children;
        batch python:here.ZenTableManager.getBatch(tableName,objects);"
    tal:condition=objects>
    <tr>
      <th class=tabletitle align=left colspan=4>
        SubLocations
      </th>
    </tr>
    <tr>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'primarySortKey','Name')">
            Name 
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'countDevices','Devices')">
            Devices
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'pingStatus','Ping')">
            Ping
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'snmpStatus','Snmp')">
            Snmp
        </th>
    </tr>
    <tr tal:repeat="group batch">
        <span tal:define="counts group/getAllCounts">
        <td class="tablevalues" align="left" width="50%">
            <a href="_" target="rightFrame"
            tal:attributes="href group/getPrimaryUrlPath"
            tal:content="group/id">Name</a>
        </td>
        <td class=tablevalues align=center tal:content="python:counts[0]"/>
        <td class="statusvalues" bgcolor="#00ff00" align="center"
            tal:attributes="bgcolor python: group.statusColor(counts[1])"
            tal:content="python:counts[1]">0
        </td>
        <td class="statusvalues" bgcolor="#00ff00" align="center"
            tal:attributes="bgcolor python: group.statusColor(counts[2])"
            tal:content="python:counts[2]">0
        </td>
        </span>
    </tr>
    <tr>
        <td colspan=4 class="tableheader" align='center'>
            <form metal:use-macro="here/zenTableNavigation/macros/navtool"></form>
        </td>
    </tr>
</table>
<br tal:condition="here/devices/countObjects">
<table metal:use-macro="here/deviceListMacro/macros/devList"></table>
<span tal:replace="structure here/standard_html_footer"/>
