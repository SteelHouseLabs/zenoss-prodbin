<tal:block metal:use-macro="here/templates/macros/page2">
<tal:block metal:fill-slot="contentPane">

<tal:block
    tal:define="tableName string:viewhistorysummary;
    whereClause python:here.scHistoryEventInit(tableName,
                            defaultSort='tallysum',sortedSence='desc');
    startdate python: here.scGetSortedTableState(tableName,'startdate');
    enddate python: here.scGetSortedTableState(tableName,'enddate');
    orderby python: here.scGetSortedTableState(tableName,'orderby');
    objects python:here.getHistorySummary(startdate,enddate,whereClause,orderby);
    batch python:here.scSortedTableGetBatch(tableName,objects)"
    >
<form action="_" method="post" tal:attributes="action request/URL">
    <table border="0" cellpadding="3" width="100%"
             align="center" bgcolor="#ffffff" cellspacing="1">
        <tr class=tableheader>
        <td>Start Date: 
            <span tal:replace="structure python:
                here.scDatePopup('start_date_pop', startdate)"/>
        </td>
        <td>End Date: 
            <span tal:replace="structure python:
                here.scDatePopup('end_date_pop', enddate)"/>
        </td>
            <td>
                <input type="submit" name="submit" value=" Search " />
            </td>
        </tr>
    </table>
</form>

<span metal:use-macro="here/templates/macros/contentSeparator"/>

<table border="0" cellpadding="3" width="100%" 
    align="center" bgcolor="#ffffff" cellspacing="1">
    <tr>
        <th tal:replace="structure python:here.scSortedTableHeader(
                    tableName,'node','Device')">
            Device
        </th>
        <th tal:replace="structure python:here.scSortedTableHeader(
                    tableName,'evcount','Event Count')">
            Event Count
        </th>
        <th tal:replace="structure python:here.scSortedTableHeader(
                    tableName,'tallysum','Tally Sum')">
            Tally Sum
        </th>
    </tr>
    <tr tal:repeat="sumitem batch">
        <td class=tablevalues>
            <a href=_  class=tablevalues
            tal:attributes="href python:sumitem.url+'/viewDevicePerformance'"
            tal:content="sumitem/node">Node</a>
        </td>
        <td class=tablevalues tal:content="sumitem/evcount">4</td>
        <td class=tablevalues tal:content="sumitem/tallysum">24</td>
    </tr>
    <tr>
        <td colspan=3 class="tableheader" align='center'>
            <form metal:use-macro="here/miscmacros/macros/navtool"></form>
        </td>
    </tr>
</table>
</tal:block>

</tal:block>
</tal:block>
