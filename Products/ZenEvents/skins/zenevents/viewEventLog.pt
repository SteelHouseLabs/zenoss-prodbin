<html
    tal:define="tableName string:eventdetail;
    evid request/evid;
    sesskey python:tableName+evid;
    params python:'&evid=%s' % evid;
    event python:here.getEventDetail(evid);
    objects event/getEventLogs;
    ">
<tal:block metal:use-macro="here/viewEventFields/macros/eventTop"/>
<table class=" zentable" cellpadding="3" cellspacing="1">
    <tr>
        <th class="tableheader">Date</th>
        <th class="tableheader">User</th>
        <th class="tableheader">Text</th>
    </tr>
    <tr tal:repeat="log objects">
        <td class="tablevalues" tal:content="python:log[1]">date</td>
        <td class="tablevalues" tal:content="python:log[0]">user</td>
        <td class="tablevalues" tal:content="python:log[2]">text</td>
    </tr>
    <tr tal:condition="python: here.has_permission('Manage EventManager')">
      <td class='tableheader' colspan='3'>
        <form method='post' 
              tal:attributes="action string:${here/absolute_url_path}">
          <input type="hidden" name="zenScreenName" 
                 tal:attributes="value template/id" /> 
          <input type="hidden" name='evid' tal:attributes='value python:evid'/>
          <input type="text" class="tablevalues" size="50" name='message'/>
          <input type="submit" class="tableheader" name='manage_addLogMessage:method' value='Add Message'/>
        </form>
      </td>
    </tr>
</table>
</html>
