<tal:block metal:use-macro="here/templates/macros/page2">
<tal:block metal:fill-slot="contentPane">
<script src="/zport/js/MochiKit.js"></script>
<script src="/zport/js/DragAndDrop.js"></script>
<script src="/zport/js/Sortable.js"></script>
<script src="zendragdrop.js"></script>
<form method="post" tal:attributes="action here/getPrimaryUrlPath">
<input type="hidden" name="zenScreenName" tal:attributes="value template/id" /> 
<table class="zentable" cellpadding="3" cellspacing="1">
   <tr>
        <th class="tabletitle" colspan="4">Connection Information</th>
    </tr>
    <tr>
        <td class="tableheader" width="25%">Default Sort</td>
        <td class="tablevalues"> 
            <input class="tablevalues" type='text'
                name="defaultOrderby" size="42"
                tal:attributes="value here/defaultOrderby">
        </td>
    </tr>
    <tr>
        <td class="tableheader" width="25%">Default Result Fields</td>
        <td class="tablevalues"> 
        <div style="float:left;">
                   <textarea tal:content="python:'\n'.join(here.defaultResultFields)"
                      name="defaultResultFields:lines"
                      id="ta_defaultResultFields"></textarea>
        <h5>Fields (drag to change order)</h5>

        </div>
        <div style="float:left;">
            <ul id="ul_defaultResultFields"
                class="sortable_list">
                <li 
                class="sortable_item"
                tal:repeat="field python:[x for x in here.getFieldList() if x
                not in here.defaultResultFields]"
                    tal:content="field">item</li>
            </ul>
        <h5>Available fields (drag to other list to add)</h5>
        </div>
            <script> var x = new ZenDragDropList('ta_defaultResultFields',
                                                 'ul_defaultResultFields');
            </script>
        </td>
    </tr>
    <tr>
        <td class="tableheader">Device Result Fields</td>
        <td class="tablevalues"> 
            <select multiple size=10 class="tablevalues" name="DeviceResultFields:list">
                <option tal:repeat="field here/getFieldList"
                    tal:content="python:field"
                    tal:attributes="value python:field;
                        selected python:field in here.DeviceResultFields" />
            </select>
        </td>
    </tr>
    <tr>
        <td class="tableheader">Default Event Id</td>
        <td class="tablevalues"> 
            <select multiple size=10 class="tablevalues" name="defaultEventId:list">
                <option tal:repeat="field here/getFieldList"
                    tal:content="python:field"
                    tal:attributes="value python:field;
                        selected python:field in here.defaultEventId" />
            </select>
        </td>
    </tr>
    <tr>
        <td class="tableheader">Required Fields</td>
        <td class="tablevalues"> 
            <select multiple size=10 class="tablevalues" name="requiredEventFields:list">
                <option tal:repeat="field here/getFieldList"
                    tal:content="python:field"
                    tal:attributes="value python:field;
                        selected python:field in here.requiredEventFields" />
            </select>
        </td>
    </tr>
    <tr>
        <td class="tableheader" colspan="2">
            <input type='submit' value="Save"
                name='zmanage_editProperties:method'>
        </td>
    </tr>
</table>
</form>
</tal:block>
</tal:block>
