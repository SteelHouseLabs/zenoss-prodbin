<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" 
	backgroundColor="0xffffff"
	backgroundAlpha="0"
	filters="{calcFilters(app().roamer.currentItem, data as Item)}">	
	
    <mx:Image id="img1" source="/zport/dmd/img/icons/{data.data.@icon}" 
        height="55" width="55" x="10" y="0"/>
	<mx:Text fontSize="10" fontWeight="bold" text="{data.data.@prop}"
    color="#000000" width="65" selectable="false" x="0" y="20"/>	

	<mx:Script>
		<![CDATA[
			import mx.effects.Glow;
			import com.adobe.flex.extras.controls.springgraph.Graph;
			import com.adobe.flex.extras.controls.springgraph.Item;
			import mx.core.Application;
			
			public function doubleClick(event: Event): void {
				app().itemDoubleClick(event);
			}
			
			private function app(): ZenNetMap {
				return Application.application as ZenNetMap;
			}
			
			private function calcFilters(currentItem: Item, item: Item): Array {
				if(app().roamer.currentItem == item) {
					return [new GlowFilter(0xFFFF00, 0.5, 8, 8, 2, 1)];
				} else if(app().roamer.hasBeenCurrentItem(item)) {
					return [new GlowFilter(0x0000FF, 0.3, 6, 6, 2, 1)];
				} else {
					return null;
				}
			}
			
			/* This function gets called whenever the graph's current item changes,
			 * or when our data changes, to calculate a color based on our distance
			 * from the current item. 
			 */
			 /* backgroundColor="{calcColor(app().roamer.currentItem, data as Item)}"
			 
			private function calcColor(currentItem: Item, item: Item): int {
				switch (app().roamer.distance(currentItem, item)) {
					case 0:
						return 0x5555ee;
					//default:
					case 1:
						return 0x7777bb;
					default:
						return 0x999999;
				}
			}
			*/
		]]>
	</mx:Script>				
</mx:VBox>
				
